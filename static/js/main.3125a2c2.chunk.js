(this.webpackJsonpflashnotes=this.webpackJsonpflashnotes||[]).push([[0],{17:function(e,t,n){},18:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(3),s=n.n(a),c=n(10),i=n.n(c),r=(n(17),n(4)),d=(n(18),n(12)),o=n(2);function l(e){var t=e.note,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=d.a.Flow,a=new e.Factory({renderer:{elementId:"stave"}}),s=a.EasyScore();return a.System().addStave({voices:[s.voice(s.notes(t.toString()),{}).setMode(e.Voice.Mode.SOFT)]}).addClef("treble"),a.draw(),function(){if(n.current){var e=n.current.querySelector("svg");e&&e.remove()}}}),[t]),Object(o.jsx)("div",{className:"stave",id:"stave",ref:n})}var j=n(9),u=n.n(j),h=n(11),b=n(0),m=n(1),y=n(7),f=n.n(y),v={C:1,"C#":2,Db:2,D:3,"D#":4,Eb:4,E:5,F:6,"F#":7,Gb:7,G:8,"G#":9,Ab:9,A:10,"A#":11,Bb:11,B:12};var O=function(){function e(t,n,a){Object(b.a)(this,e),this.midi=t,this.str=n,this.accidental=a}return Object(m.a)(e,[{key:"eq",value:function(e){return this.midi===e.midi}},{key:"toString",value:function(){return this.str}}],[{key:"fromNumber",value:function(t){var n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][t%12];return new e(t,n+(Math.floor(t/12)-1),n[1]||null)}},{key:"fromString",value:function(t){var n=3===t.length?t[0]+t[1]:t[0];return new e(v[n]-1+12*(+t[t.length-1]+1),t,"b"===t[1]||"#"===t[1]?t[1]:null)}}]),e}(),k=[];function p(e,t){var n=document.querySelector('audio[data-note="'.concat(e.toString(),'"]'));if(!n)throw new Error("Cannot find <audio> for note "+e.toString());t(n)}function x(e){p(e,(function(t){k.find((function(t){return t.eq(e)}))||(k.push(e),t.currentTime=0,t.play())}))}function N(e){(e=e||f.a.last(k))&&p(e,(function(t){t.currentTime=0,t.pause(),f.a.remove(k,(function(t){return t.eq(e)}))}))}function w(e){return C.apply(this,arguments)}function C(){return(C=Object(h.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(t),e.abrupt("return",new Promise((function(e){setTimeout((function(){N(t),e()}),500)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(23);function S(e){var t={65:"C4",87:"C#4",83:"D4",69:"D#4",68:"E4",70:"F4",84:"F#4",71:"G4",89:"G#4",72:"A4",85:"A#4",74:"B4",75:"C5",79:"C#5",76:"D5",80:"D#5",186:"E5"}[e];if(t)return O.fromString(t);throw new Error("Undefined key pressed "+e)}function g(e){var t=e.onKey;Object(a.useEffect)((function(){function e(e){var t=document.querySelector('.key[data-key="'.concat(e.keyCode,'"]'));t&&(t.classList.add("playing"),x(S(e.keyCode)))}function n(e){var n=document.querySelector('.key[data-key="'.concat(e.keyCode,'"]'));if(n){n.classList.remove("playing");var a=S(e.keyCode);N(a),t(a)}}return window.addEventListener("keydown",e),window.addEventListener("keyup",n),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",n)}}),[t]);var n=Object(a.useCallback)((function(e){var n=e.target,a=n.dataset.note;if(a){var s=O.fromString(a);x(s),n.classList.add("playing"),s,w(s).then((function(){n.classList.remove("playing"),t(s)}))}}),[t]);return Object(o.jsxs)("section",{id:"main",children:[Object(o.jsx)("div",{className:"nowplaying"}),Object(o.jsxs)("div",{className:"keys",onMouseDown:n,children:[Object(o.jsx)("div",{"data-key":"65",className:"key","data-note":"C4",children:Object(o.jsx)("span",{className:"hints",children:"A"})}),Object(o.jsx)("div",{"data-key":"87",className:"key sharp","data-note":"C#4",children:Object(o.jsx)("span",{className:"hints",children:"W"})}),Object(o.jsx)("div",{"data-key":"83",className:"key","data-note":"D4",children:Object(o.jsx)("span",{className:"hints",children:"S"})}),Object(o.jsx)("div",{"data-key":"69",className:"key sharp","data-note":"D#4",children:Object(o.jsx)("span",{className:"hints",children:"E"})}),Object(o.jsx)("div",{"data-key":"68",className:"key","data-note":"E4",children:Object(o.jsx)("span",{className:"hints",children:"D"})}),Object(o.jsx)("div",{"data-key":"70",className:"key","data-note":"F4",children:Object(o.jsx)("span",{className:"hints",children:"F"})}),Object(o.jsx)("div",{"data-key":"84",className:"key sharp","data-note":"F#4",children:Object(o.jsx)("span",{className:"hints",children:"T"})}),Object(o.jsx)("div",{"data-key":"71",className:"key","data-note":"G4",children:Object(o.jsx)("span",{className:"hints",children:"G"})}),Object(o.jsx)("div",{"data-key":"89",className:"key sharp","data-note":"G#4",children:Object(o.jsx)("span",{className:"hints",children:"Y"})}),Object(o.jsx)("div",{"data-key":"72",className:"key","data-note":"A4",children:Object(o.jsx)("span",{className:"hints",children:"H"})}),Object(o.jsx)("div",{"data-key":"85",className:"key sharp","data-note":"A#4",children:Object(o.jsx)("span",{className:"hints",children:"U"})}),Object(o.jsx)("div",{"data-key":"74",className:"key","data-note":"B4",children:Object(o.jsx)("span",{className:"hints",children:"J"})}),Object(o.jsx)("div",{"data-key":"75",className:"key","data-note":"C5",children:Object(o.jsx)("span",{className:"hints",children:"K"})}),Object(o.jsx)("div",{"data-key":"79",className:"key sharp","data-note":"C#5",children:Object(o.jsx)("span",{className:"hints",children:"O"})}),Object(o.jsx)("div",{"data-key":"76",className:"key","data-note":"D5",children:Object(o.jsx)("span",{className:"hints",children:"L"})}),Object(o.jsx)("div",{"data-key":"80",className:"key sharp","data-note":"D#5",children:Object(o.jsx)("span",{className:"hints",children:"P"})}),Object(o.jsx)("div",{"data-key":"186",className:"key","data-note":"E5",children:Object(o.jsx)("span",{className:"hints",children:";"})})]})]})}var E=function(){var e=Object(a.useState)(O.fromString("C4")),t=Object(r.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)("?"),i=Object(r.a)(c,2),d=i[0],j=i[1];Object(a.useEffect)((function(){w(n)}),[n]);var u=Object(a.useCallback)((function(e){e.eq(n)&&(j(n.toString()),setTimeout((function(){j("?");var e=O.fromNumber(f.a.random(60,72));s(e)}),500))}),[n]);return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(l,{note:n}),Object(o.jsx)("h1",{children:d}),Object(o.jsx)(g,{onKey:u})]})};i.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(E,{})}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.3125a2c2.chunk.js.map